<% provide(:title, 'Account Settings') %>
<div data-role="page" id="settings">
	<%= form_for(@user, :html => {"data-ajax" => false}) do |f| %>
		<div data-role="header">
			<a href="#" data-rel="back" data-direction="reverse">Back</a>
			<h4>Settings</h4>
			<a class="ui-btn-right submit">Save</a>
		</div>
		<%= render 'shared/error_messages', object: @user %>
		<%=	f.label :name %>
		<%=	f.text_field :name, style: "border: 1px solid #aaa; border-radius: 0.6em; padding-left: 4px;" %>
		<div>
			<%= image_tag @user.avatar.url(:thumb) %>
			<%= f.file_field :avatar, style: "border: 1px solid #aaa; border-radius: 0.6em; padding-left: 4px;" %>
		</div>
		<%=	f.label :username %>
		<%=	f.text_field :username, style: "border: 1px solid #aaa; border-radius: 0.6em; padding-left: 4px;" %>
		<%=	f.label :email %>
		<%=	f.text_field :email, style: "border: 1px solid #aaa; border-radius: 0.6em; padding-left: 4px;" %>
		<a class="toggle"><%=	f.label "Change Password?" %></a>
		<div id="upper-toggle" style="display:none;">
			<p><small>Enter your new password:</small></p>
			<%=	f.password_field :password, style: "border: 1px solid #aaa; border-radius: 0.6em; padding-left: 4px;" %>
		</div>
	<% end %>
	<script type="text/javascript">
		$(function(){
		  $('.toggle').click(function(){
		     $('#upper-toggle').toggle();
		  });
		});
	</script>
	<script type="text/javascript">
		$('.submit').click(function(){
	    $('form').submit();
	    return false;
		});
	</script>
</div>